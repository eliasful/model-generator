ajaxCat = {cadastrar: function (linha) {$.ajax({url: appUrl + "/secured/cadastros/cat/",data: Cat.formCadastrar.serialize(),type: "POST",beforeSend: function () {botaoLoad($("#btnCadastrarCat"));},success: function (response) {var result = jQuery.parseJSON(response);if (result.idfator > 0) {var data = {"idfator": result.idfator,"descricao": result.descricao,"tecutil": result.tecutil};if (linha >= 0) {$("#dadosCatTable").bootstrapTable("updateRow", {index: linha, row: result});} else {$("#dadosCatTable").bootstrapTable("append", result);}modalAlert("", "Salvo com sucesso!");} else {modalAlert("", "Erro ao salvar!");}botaoNormal($("#btnCadastrarCat"));},error: function (xhr, status, error) {procError(error, $("#btnCadastrarCat"));}});},excluir: function (id) {$.ajax({url: appUrl + "/secured/cadastros/cat/excluir/" + id,type: "DELETE",beforeSend: function () {botaoLoad($("#btnCadastrarCat"));},success: function (response) { if (response > 0) {modalAlert("", "Cat excluido com sucesso!");$("#dadosCatTable").bootstrapTable("remove", {field: "idfator", values: [id]});} else {modalAlert("Erro ao excluir", "Este Cat está vinculado a um registro");}botaoNormal($("#btnCadastrarCat"));},error: function (xhr, status, error) {procError(error, $("#btnCadastrarCat"));} });},carregar: function (id) {$.getJSON(appUrl + "/secured/cadastros/cat/carregar/" + id, function (data) {putResultVal(data, "#formCadastrarCat");setTextSelect2("#idempregado", data.idempregado.idtecnica, data.idempregado.descricao);setTextSelect2("#idfuncao", data.idfuncao.idtecnica, data.idfuncao.descricao);setTextSelect2("#cidadeacid", data.cidadeacid.idtecnica, data.cidadeacid.descricao);setTextSelect2("#parteating", data.parteating.idtecnica, data.parteating.descricao);setTextSelect2("#agentecausa", data.agentecausa.idtecnica, data.agentecausa.descricao);setTextSelect2("#situacaoger", data.situacaoger.idtecnica, data.situacaoger.descricao);setTextSelect2("#muntest1", data.muntest1.idtecnica, data.muntest1.descricao);setTextSelect2("#muntest2", data.muntest2.idtecnica, data.muntest2.descricao);setTextSelect2("#idmedico", data.idmedico.idtecnica, data.idmedico.descricao);setTextSelect2("#idnatlesao", data.idnatlesao.idtecnica, data.idnatlesao.descricao);});},listar: function () {$.getJSON(appUrl + "/secured/cadastros/cat/listar.json", function (data) {$("#dadosCatTable").bootstrapTable({data: data,toolbar: ".toolbarCat",showRefresh: true,search: true,showToggle: true,showColumns: true,pagination: true,striped: true,sortable: true,showBtnCadastrar: true,btnCadastrarId: "btnCadastrarCat",btnCadastrarLabel: "Cadastrar",pageSize: 10,pageList: [8, 10, 25, 50, 100],sortName: "idfator",sortOrder: "asc",formatShowingRows: function (pageFrom, pageTo, totalRows) {/*return "Total de registros: " + totalRows; descomentar se necessário*/},formatRecordsPerPage: function (pageNumber) {return pageNumber + "  registros visíveis";},icons: {refresh: "fa fa-refresh",toggle: "fa fa-th-list",columns: "fa fa-columns",detailOpen: "fa fa-plus-circle",detailClose: "fa fa-minus-circle"}});$("#btnCadastrarCat").click(function () {linha = undefined;Cat.incluir();});})}};